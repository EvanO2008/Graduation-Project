<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Charity Search</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <div class="container">
    <h1>Charity Finder</h1>
    <input type="text" id="searchInput" placeholder="Search charities..." oninput="handleSearch()" />
    <div class="charity-list" id="charityList"></div>
  </div>

  <script>
    let allCharities = [];

    async function loadDatabase() {
      try {
        const res = await fetch('database.json');
        allCharities = await res.json();
        displayCharities(allCharities);
      } catch (e) {
        document.getElementById('charityList').innerHTML = '<p>Error loading database.</p>';
      }
    }

    function handleSearch() {
      const query = document.getElementById('searchInput').value.trim().toLowerCase();

      const filtered = allCharities.filter(charity =>
        charity.name.toLowerCase().includes(query) ||
        charity.description.toLowerCase().includes(query)
      );

      displayCharities(filtered);
    }

    function displayCharities(charities) {
      const list = document.getElementById('charityList');
      list.innerHTML = '';

      if (charities.length === 0) {
        list.innerHTML = '<p>No charities found.</p>';
        return;
      }

      charities.forEach(charity => {
        const item = document.createElement('div');
        item.className = 'charity-item';

        item.innerHTML = `
          <img src="${charity.image}" alt="${charity.name}" />
          <h3>${charity.name}</h3>
          <p>${charity.description}</p>
          <a href="${charity.website}" target="_blank">Visit Website</a>
        `;

        list.appendChild(item);
      });
    }

    window.onload = loadDatabase;
  </script>

</body>
</html>
